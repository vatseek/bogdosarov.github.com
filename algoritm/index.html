<!DOCTYPE html>
<html class="no-js">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Marsen</title>
		<meta name="description" content="">
		<link rel="stylesheet" href="css/normalize.css">
		<link rel="stylesheet" href="css/main.css">
	</head>
	<body>
		<!--[if lt IE]>
		<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
		<![endif]-->

		<h1>Генерація випадкових чисел методом вихра Марсена</h1>

		<div id="numbers">
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
			<span>
				<div>
					1
				</div>
				<div>
					2
				</div>
				<div>
					3
				</div>
				<div>
					4
				</div>
				<div>
					5
				</div>
				<div>
					6
				</div>
				<div>
					7
				</div>
				<div>
					8
				</div>
				<div>
					9
				</div>
				<div>
					0
				</div> </span>
		</div>

		<button>
			Генерувати
		</button>

		<h1>Принцип дії алгоритму</h1>
		<div class="description">
			<b>Крок 0.</b>
			Ініціалізуємо значення константам
			<i>u</i>
			,
			<i>h</i>
			,
			<i>a</i>
			<i>u</i>
			← 10…0 бітова маска старших
			<i>w-r</i>
			біт,
			<i>h</i>
			← 01…1 бітова маска молодших
			<i>r</i>
			біт,
			<i>a</i>
			←
			<i> останній рядок матриці <i>A</i> .
			<br> <br />
			<b>Крок 1.</b> <i> [0], <i> [1],…, <i> [n-1] ← початкове заповнення
			<br><br />
			<b>Крок 2.</b> Знаходження <i> <i> ← ( <i> [i] AND <i>u</i> ) OR ( <i> [(i + 1) mod n] AND <i>h</i> )
			<br><br />
			<b>Крок 3.</b>  Знаходження значення наступного елемента послідовності по рекурсивному виразу (1) <i> [i] ← <i> [(i + m) mod n] XOR ( <i> >>1) XOR <i>a</i> якщо молодший біт <i> = 1
			<br><br />
			Або <i> [i] ← <i> [(i + m) mod n] XOR ( <i> >>1) XOR 0   якщо молодший <i> = 0 <br /><b>Крок 4.</b> Знаходження <i> [i] <i>T</i> <i> ← <i> [i] <i> ← <i> XOR ( <i> >> <i>u</i> ) <i> ← <i> XOR (( <i> << <i>s</i> ) AND <b>b</b> ) <i> ← <i> XOR (( <i> << <i>t</i> ) AND <b>c</b> ) <i> ← <i> XOR ( <i> >> <i>l</i> ) вивід <i> <b>Крок 5.</b> i ← (i + 1) mod n
			<br><br />
			<b>Крок 6.</b> Перейти к Кроку 2.
		</div>

		<script src="js/main.js"></script>
		<script src="js/marsen.js"></script>
		<script>
			var a;
			$(document).ready(function() {
				var numbers = $('#numbers span'), dates = [], current = 0, date;
				for ( i = 1; i < 100; i++) {
					a = Math.floor(genrand_res53() * 100000000000000);
					str = a.toString();
					dates.push(str);
				}
				console.log(dates);

				numbersRoll = function(n) {
					for (var i = 0; i < numbers.size(); i++) {
						numbers.eq(i).stop().animate({
							top : dates[n].charAt(i) * -1 + 'em'
						}, 1000);
					}
				};

				//  numbersRoll(current);

				$('button').click(function() {
					current++;
					if (current >= dates.length) {
						current = 0;
					}

					numbersRoll(current);
				});

			});
		</script>
	</body>
</html>
